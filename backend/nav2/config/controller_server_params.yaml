# Controller Server Parameters for Humanoid Navigation

controller_server:
  ros__parameters:
    use_sim_time: True
    controller_frequency: 20.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.5
    min_theta_velocity_threshold: 0.001
    progress_checker_plugin: "progress_checker"
    goal_checker_plugin: "goal_checker"
    controller_plugins: ["FollowPath"]

    # Humanoid-specific controller
    FollowPath:
      plugin: "nav2_rotation_shim_controller::RotationShimController"
      # Bipedal-specific parameters
      rotation_shim:
        plugin: "nav2_regulated_pure_pursuit_controller::RegulatedPurePursuitController"
        desired_linear_vel: 0.2  # Slower for stability
        lookahead_dist: 0.4
        min_lookahead_dist: 0.2
        max_lookahead_dist: 0.9
        lookahead_time: 1.5
        rotate_to_heading_angular_vel: 1.0
        max_angular_accel: 3.2
        goal_dist_tol: 0.25
        xy_goal_tolerance: 0.25
        stateful: True
        replan_frequency: 0.5
        use_velocity_scaled_lookahead_dist: false
        use_approach_linear_controller: false
        max_allowed_time_to_collision_up_to_carrot: 1.0
        carrot_planner:
          plugin: "nav2_carrot_planer::CarrotPlanner"
          control_points_distance: 0.5
          lookAheadMin: 0.25
          lookAheadMax: 0.5
          lookAheadGain: 1.0
          oscillation_timeout: 0.3
          oscillation_distance: 0.02

controller_server_rclcpp_node:
  ros__parameters:
    use_sim_time: True